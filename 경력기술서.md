## **1. 공통 코드 모듈화 및 SDK/JAR 개발**

### **목표**

- 스파게티처럼 얽혀 있는 3만 줄 규모의 공통 코드를 체계적으로 정리하고, 각 서비스 혹은 기업에서 공통으로 사용할 수 있는 모듈 제공
- 기업별 커스텀 로직과 진짜 공통 로직을 분리하여 **효율적 재사용성** 및 **유지보수성** 확보

### **주요 작업**

1. **코드 분리 및 모듈화**
    - JSP 기반으로 뒤섞여 있던 로그인, 세션 관리, 푸쉬 쓰레드 등 로직 중 **공통 로직**만 선별하여 모듈 단위로 분리
    - 기존 프레임워크 환경 뿐 아니라 프레임워크 마이그레이션 시에도 사용할 수 있도록 **SDK와 JAR** 두 가지 방식을 고려
    - Typescript를 활용한 **module** 방식과 **CommonJS** 방식을 모두 지원하도록 구현
    - http 상태 코드를 준수하도록 API 호출 부분 재정립 및 에러 반환 처리
2. **SDK 개발**
    - Typescript로 작성하여, 상태 코드 변환 및 필수 인자 검증 로직 추가
    - 에러 발생 시 개발자가 원인을 빠르게 파악할 수 있도록 **세부 에러 메시지** 제공
3. **JAR 개발**
    - 기존 호환성(주로 1.8 버전 사용)을 고려해 **Java 1.8 기반**으로 구현
    - SDK와 동일하게 http 상태 코드 변환 및 에러 처리 로직 적용
4. **검토 및 시도**
    - 사내 CTO 검토 후, 엔터 고객사의 요구사항(유틸성 코드 지속 추가·수정, 각 기업별 병행 작업으로 인한 버전 관리 이슈)으로 인해 전면 도입은 보류
    - 외부 고객사 연동 시 제공으로 방향을 바꿔 제공하려 했으나 같은 이유로 보류되었고 제한적으로 사용하거나 학습용으로 JWT 인증 로직과 연결하여 PoC 진행

### **결과/성과**

- **시도와 한계**: 사내 정책 및 다수 고객사 요구사항으로 전사적 적용은 어려웠으나, SDK/JAR 형태의 모듈화 구조가 향후 확장 가능성 및 이후의 마이그레이션 진행 시 도움이 될 것으로 보임

### **토스 핵심가치 연계**

- 한 달이라는 짧은 기간 동안 빠르게 기획 → 개발 → 시도 과정을 진행
- 말로만, 지식으로만 비교하기보다 실제로 만들어서 보여주며 설득을 진행함
- 기존 세션 방식에서 JWT로 전환을 연구하며 다양한 인증 방식을 테스트
- 토스의 SDK 구현 방식을 벤치마킹하여 어떤 점을 고려해서 만들어야 할지 결정

## **2. 세션 vs JWT 도입 검토 및 개선**

### **목표**

- 비표준 파라미터로 세션을 생성하고, MSA 구조에서 sticky session, LB 설정, 서버 메모리 부족 이슈를 해소할 대안 마련
- JWT 기반의 stateless 구조를 도입할 때의 **장단점** 파악 및 실제 적용 가능성 평가

### **주요 작업**

1. **세션 방식 문제 분석**
    - MSA이면서 세션 방식을 사용하며, 비표준 파라미터로 세션을 생성하는 등 비효율적인 부분이 많이 존재함
    - API 처리 로직에서 100군데 이상 세션의 값을 광범위하게 사용되고 있어 JWT 방식과 세션 방식의 혼용이 필요할 수 있는데 혼용 시 이점이 희석됨
    - 세션 클러스터링 방식(Redis 사용)은 이미 글로벌 서비스에 적용되어 테스트를 진행하고 있어 추가적으로 작업할 내용이 없음
2. **JWT 테스트 코드 작성하여 비교하며 진행**
    - https://github.com/gkdis6/session 레포지토리를 통해 세션 방식 vs JWT 방식을 비교·테스트
    - 위의 SDK 코드를 수정하여 JWT 기반 API 호출로직을 **직접 구현** 후 성능 및 유지보수성 검토

### **결과/성과**

- **적용 검토 결론**: 일부 서비스에서 세션 로직을 혼용하면 문제가 되는 부분은 해결 가능하지만, JWT의 stateless 특장점이 약화됨. 전면 교체보다 **세션 클러스터링 유지**가 효율적이라는 결론
- **학습 및 역량 강화**: 세션 vs. JWT 구조 차이를 명확히 이해하고, 사내 인프라·서비스 구조에 맞는 최적의 대안을 도출

### **토스 핵심가치 연계**

- 전사/글로벌 서비스의 인프라와 구조를 고려하여, 특정 기술이 아니라 팀 전체 효율성을 높이는 방향으로 의사 결정
- 세션 vs. JWT 각 방식의 장단점을 객관적으로 비교·분석한 뒤 최선의 방안 도출

## **3. 소켓 로직 개선 (ipt 소켓 & 상태 서버 소켓)**

### **목표**

- ipt 소켓(사내 IP 전화기) 재연결 시 통화 기능 이슈(오프라인 상태 고착) 해결
- 상태 서버 소켓(실시간 로그인/자리비움/로그아웃) 동기화 불일치 문제로 인한 VOC 감소

### **주요 작업**

1. **ipt 소켓**
    - 재연결 시 connect 리스너 트리거 여부 확인
    - 해당 이벤트에서 자동으로 ‘온라인’ 상태 갱신 처리
2. **상태 서버 소켓**
    - 일렉트론 기반 환경에서 **창이 닫힐 때** 매번 로그아웃 되어버리는 문제 → 부모·자식창 간 소켓 처리 로직 수정
    - Redis 키 관리(소켓 연결 주소 저장 → disconnected 시 삭제)로 가장 최신 상태만 유지

### **결과/성과**

- **연결 안정성 확보**: 재연결 시 상태 불일치 이슈가 해결되어 **통화 기능** 정상화
- **VOC(고객 불편 신고)** 일부 감소: 실시간 상태 동기화가 개선되어 사용자의 혼선 최소화

### **토스 핵심가치 연계**

- VOC를 해결하기 위해 문제 원인을 끈질기게 추적하고, 소켓 로직 전반을 수정·테스트
- Redis를 활용해 상태 정보를 일원화·가시화함으로써 문제 상황을 명확히 파악

## **4. 기업별 프로젝트 특이사항 게시글 작성**

### **목표**

- 기업마다 다른 요구사항 및 연동 방식 관리가 파편화되어 발생하는 커뮤니케이션 문제 해결
- 구두·개인 문서·기억에 의존하던 **특이사항**을 공용 게시글로 통합

### **주요 작업**

1. **‘특이사항’ 게시글 분류 및 템플릿**
    - 각 기업별 프로젝트 이슈·연동 방식·주의사항 등을 **정형화된 포맷**으로 작성
    - 기존 산발적으로 흩어져 있던 정보를 **사내 공용 게시판**으로 일원화
2. **협업 프로세스 확립**
    - 인프라팀, 개발팀, CS팀이 공통으로 참고할 수 있는 **업데이트 절차** 마련
    - 신규 인력 투입 시 **히스토리 파악**에 소요되는 시간 대폭 단축

### **결과/성과**

- **커뮤니케이션 효율성 향상**: 사내 모든 부서가 이슈 및 노하우를 한눈에 파악 가능
- **재발 방지**: 누적된 이슈와 해결 과정을 공유함으로써 **동일 이슈 재발 최소화**

### **토스 핵심가치 연계**

- 모든 이슈를 투명하게 공개하여, 부서 간 지식 비대칭을 해소
- 사일로(Silo)화되지 않도록, 전사적으로 이슈 정보를 공유

## **마무리 요약**

- **SDK/JAR 모듈화** 시도: 짧은 기간임에도 불구하고 공통 코드 분리·모듈화로 **재사용성**을 높이는 방법을 적극 모색
- **세션 vs JWT 검토**: 현행 인프라를 고려해 **세션 클러스터링**이 더 적합하다는 결론 도출
- **소켓 로직 개선**: 실시간 통화 및 상태 동기화 이슈를 해결함으로써 VOC 감소 및 시스템 안정성 제고
- **기업별 특이사항 게시글**: 프로젝트 파편화를 방지하고, **투명하고 신속한 협업** 체계 확립

## **추가 작업: NestJS & NextJS 기반 JWT 마이그레이션 (1/15~)**

### **추진 배경 및 작업 내용**

- 기존 세션 기반 서비스의 일부를 **NestJS, NextJS, JWT** 방식으로 구현하는 것이 긴급 결정(이후 표준이 될 수 있음)
- 이전에 작성한 SDK 코드를 **재활용**하여, JWT 인증 로직 및 API 호출 방식을 **표준화** (API response 포맷, HTTP status code 등)
- 마이그레이션 속도를 높이기 위해 **기존 PoC**(세션 vs JWT 테스트) 및 라이브러리(SDK/JAR)에서 학습·검증된 로직을 적극 도입

### **성과 및 시사점**

1. **빠른 대응 및 반복적 학습**
    - 갑작스러운 요구사항 변경에도 불구하고, **기존 SDK 코드**를 기반으로 재사용하여 개발 공수를 절감
    - 이전 PoC 경험을 살려 **단기간**에 JWT 인증을 NestJS 및 NextJS 환경에 맞게 적용
2. **표준화와 호환성**
    - HTTP Status Code, 에러 응답 스펙 등 이전부터 문제가 되던 부분을 이번 기회를 빌어 **표준**을 준수하도록 수정
3. **협업 효율성 제고**
    - **JWT 인증** 로직을 문서화 및 공유
    - 개발팀 모두가 일관된 **오류 처리 흐름**을 공유함으로써 협업 비용 절감
4. **지속적인 개선과 가치 창출**
    - 특정 기술에만 국한되지 않고, **시장의 변화와 요구사항에 따라 빠르게 전환**할 수 있는 경험을 축적

**토스 핵심 가치와의 연계**

- **목표 지향성과 빠른 실행**: 예기치 못한 업무에도 빠르게 기존 학습한 내용을 바탕으로 → 개발 → 테스트 과정을 반복하며 성과를 만들어냄
- **투명한 지식 공유**: 기존 PoC 및 SDK/JAR를 활용한 JWT 인증 로직을 팀원 전원이 쉽게 파악하고 재활용할 수 있도록 문서화 및 코드 공유
- **사용자 중심(고객 가치 창출), 커뮤니케이션 촉진**: API 응답 표준화, 인증 강화로 더 안정적인 서비스를 제공하고, 원인 파악을 쉽게 해 문제 해결 속도를 높여 고객 만족에 기여
- **지속적인 도전**: 세션 vs JWT, NestJS vs NextJS 등 다양한 기술 스택을 비교·검토하고, 실제 적용까지 이끈 경험을 통해 **기술적 역량 강화**
